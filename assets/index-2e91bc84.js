import"./modulepreload-polyfill-3cfb730f.js";const e={running:!0,score:0,coins:0,lives:3,velocityX:0,velocityY:0,posX:0,posY:0,fallSpeed:2};function q(){e.running&&(e.velocityY=-10,e.velocityX=-3,e.score++,document.querySelector(".control__button--left").classList.add("active"),setTimeout(()=>{document.querySelector(".control__button--left").classList.remove("active")},150),document.querySelector(".game__player").style.transform="scaleX(-1)")}function b(){e.running&&(e.velocityY=-10,e.velocityX=3,e.score++,document.querySelector(".control__button--right").classList.add("active"),setTimeout(()=>{document.querySelector(".control__button--right").classList.remove("active")},150),document.querySelector(".game__player").style.transform="scaleX(1)")}const g=document.querySelector(".modal__retry");g.addEventListener("click",()=>{g.classList.add("active"),setTimeout(()=>{g.classList.remove("active"),document.querySelector(".modal").classList.add("hidden"),location.reload()},250)});function L(){document.querySelector(".control__button--left").addEventListener("click",q),document.querySelector(".control__button--right").addEventListener("click",b)}function C(t){const n=document.querySelector(".game__start-message");let o=3;n.textContent=o;const i=setInterval(()=>{o--,n.textContent=o>0?o:"Start!",o<0&&(clearInterval(i),n.textContent="",t())},1e3)}function v(){const t=document.querySelector(".game__coin"),n=document.querySelector(".game__cloud"),o=document.querySelector(".game"),i=t.offsetHeight,c=t.offsetWidth,s=n.getBoundingClientRect(),l=o.getBoundingClientRect(),a=s.bottom-l.top,f=o.clientHeight-i,y=a+Math.random()*(f-a),r=Math.random()*(o.clientWidth-c);t.style.left=r+"px",t.style.top=y+"px",t.style.display="block",clearTimeout(t.despawnTimer),t.despawnTimer=setTimeout(()=>{t.style.display==="block"&&(t.style.display="none",v())},5e3)}function R(t,n){const o=t.getBoundingClientRect(),i=n.getBoundingClientRect();return!(o.right<i.left||o.left>i.right||o.bottom<i.top||o.top>i.bottom)}function h(){const t=document.querySelector(".game__cloud"),n=document.querySelector(".game__window"),o=document.querySelector(".game__player"),i=e.fallSpeed,c=document.createElement("div");c.classList.add("drop"),c.style.setProperty("--fallSpeed",`${i}s`);const s=t.getBoundingClientRect(),l=n.getBoundingClientRect(),a=Math.random()*t.offsetWidth,f=s.left-l.left+a,y=s.bottom-l.top;c.style.left=`${f}px`,c.style.top=`${y}px`,n.appendChild(c);let r;function _(){const d=c.getBoundingClientRect(),u=o.getBoundingClientRect();!(d.right<u.left||d.left>u.right||d.bottom<u.top||d.top>u.bottom)?(X(),c.remove()):r=requestAnimationFrame(_)}r=requestAnimationFrame(_),setTimeout(()=>{c.remove(),cancelAnimationFrame(r)},i*1e3)}setInterval(()=>{fallSpeed>.5&&(fallSpeed-=.1)},1e4);let m=2e3,p;setInterval(()=>{m>500&&(m-=200,clearInterval(p),p=setInterval(h,m))},1e4);setTimeout(()=>{p=setInterval(h,m)},2e3);function X(){e.lives--;const t=[document.querySelector(".lifes__life--third"),document.querySelector(".lifes__life--second"),document.querySelector(".lifes__life--first")];e.lives>=0&&(t[e.lives].style.opacity=.3),e.lives===0&&(document.querySelector(".modal--game-over").classList.remove("hidden"),document.querySelector(".control__button--left").classList.add("disabled"),document.querySelector(".control__button--right").classList.add("disabled"),e.running=!1)}function S(){if(!e.running)return;const t=document.querySelector(".game__player"),n=document.querySelector(".game"),o=document.querySelector(".score__value--points"),i=document.querySelector(".score__value--player"),c=document.querySelector(".game__coin");o.textContent=e.score,e.velocityY+=.5,e.posY+=e.velocityY,e.posX+=e.velocityX;const s=n.clientHeight,l=n.clientWidth;e.posY<0&&(e.posY=0,e.velocityY=0),e.posY+t.offsetHeight>=s&&(e.posY=s-t.offsetHeight,e.velocityY=0),e.posX<0&&(e.posX=0,e.velocityX=0),e.posX+t.offsetWidth>=l&&(e.posX=l-t.offsetWidth,e.velocityX=0),t.style.top=e.posY+"px",t.style.left=e.posX+"px",R(t,c)&&(e.coins++,i.textContent=e.coins,c.style.display="none",clearTimeout(c.despawnTimer),setTimeout(v,2e3)),requestAnimationFrame(S)}function Y(){v(),C(()=>S()),L()}const T=["../../assets/img/btn-retry.png","../../assets/img/btn-retry-active.png","../../assets/img/EndGame.png"];T.forEach(t=>{const n=new Image;n.src=t});Y();document.addEventListener("gesturestart",function(t){t.preventDefault()});document.addEventListener("gesturechange",function(t){t.preventDefault()});document.addEventListener("gestureend",function(t){t.preventDefault()});
