(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();const e={running:!0,score:0,coins:0,lives:3,velocityX:0,velocityY:0,posX:0,posY:0,fallSpeed:2};function q(){e.running&&(e.velocityY=-10,e.velocityX=-3,e.score++,document.querySelector(".control__button--left").classList.add("active"),setTimeout(()=>{document.querySelector(".control__button--left").classList.remove("active")},150),document.querySelector(".game__player").style.transform="scaleX(-1)")}function L(){e.running&&(e.velocityY=-10,e.velocityX=3,e.score++,document.querySelector(".control__button--right").classList.add("active"),setTimeout(()=>{document.querySelector(".control__button--right").classList.remove("active")},150),document.querySelector(".game__player").style.transform="scaleX(1)")}const y=document.querySelector(".modal__retry");y.addEventListener("click",()=>{y.classList.add("active"),setTimeout(()=>{y.classList.remove("active"),document.querySelector(".modal").classList.add("hidden"),location.reload()},250)});function b(){document.querySelector(".control__button--left").addEventListener("click",q),document.querySelector(".control__button--right").addEventListener("click",L)}function C(t){const c=document.querySelector(".game__start-message");let n=3;c.textContent=n;const r=setInterval(()=>{n--,c.textContent=n>0?n:"Start!",n<0&&(clearInterval(r),c.textContent="",t())},1e3)}function v(){const t=document.querySelector(".game__coin"),c=document.querySelector(".game__cloud"),n=document.querySelector(".game"),r=t.offsetHeight,o=t.offsetWidth,i=c.getBoundingClientRect(),s=n.getBoundingClientRect(),a=i.bottom-s.top,f=n.clientHeight-r,p=a+Math.random()*(f-a),l=Math.random()*(n.clientWidth-o);t.style.left=l+"px",t.style.top=p+"px",t.style.display="block",clearTimeout(t.despawnTimer),t.despawnTimer=setTimeout(()=>{t.style.display==="block"&&(t.style.display="none",v())},5e3)}function R(t,c){const n=t.getBoundingClientRect(),r=c.getBoundingClientRect();return!(n.right<r.left||n.left>r.right||n.bottom<r.top||n.top>r.bottom)}function h(){const t=document.querySelector(".game__cloud"),c=document.querySelector(".game__window"),n=document.querySelector(".game__player"),r=e.fallSpeed,o=document.createElement("div");o.classList.add("drop"),o.style.setProperty("--fallSpeed",`${r}s`);const i=t.getBoundingClientRect(),s=c.getBoundingClientRect(),a=Math.random()*t.offsetWidth,f=i.left-s.left+a,p=i.bottom-s.top;o.style.left=`${f}px`,o.style.top=`${p}px`,c.appendChild(o);let l;function _(){const u=o.getBoundingClientRect(),d=n.getBoundingClientRect();!(u.right<d.left||u.left>d.right||u.bottom<d.top||u.top>d.bottom)?(X(),o.remove()):l=requestAnimationFrame(_)}l=requestAnimationFrame(_),setTimeout(()=>{o.remove(),cancelAnimationFrame(l)},r*1e3)}setInterval(()=>{fallSpeed>.5&&(fallSpeed-=.1)},1e4);let m=2e3,g;setInterval(()=>{m>500&&(m-=200,clearInterval(g),g=setInterval(h,m))},1e4);setTimeout(()=>{g=setInterval(h,m)},2e3);function X(){e.lives--;const t=[document.querySelector(".lifes__life--third"),document.querySelector(".lifes__life--second"),document.querySelector(".lifes__life--first")];e.lives>=0&&(t[e.lives].style.opacity=.3),e.lives===0&&(document.querySelector(".modal--game-over").classList.remove("hidden"),document.querySelector(".control__button--left").classList.add("disabled"),document.querySelector(".control__button--right").classList.add("disabled"),e.running=!1)}function S(){if(!e.running)return;const t=document.querySelector(".game__player"),c=document.querySelector(".game"),n=document.querySelector(".score__value--points"),r=document.querySelector(".score__value--player"),o=document.querySelector(".game__coin");n.textContent=e.score,e.velocityY+=.5,e.posY+=e.velocityY,e.posX+=e.velocityX;const i=c.clientHeight,s=c.clientWidth;e.posY<0&&(e.posY=0,e.velocityY=0),e.posY+t.offsetHeight>=i&&(e.posY=i-t.offsetHeight,e.velocityY=0),e.posX<0&&(e.posX=0,e.velocityX=0),e.posX+t.offsetWidth>=s&&(e.posX=s-t.offsetWidth,e.velocityX=0),t.style.top=e.posY+"px",t.style.left=e.posX+"px",R(t,o)&&(e.coins++,r.textContent=e.coins,o.style.display="none",clearTimeout(o.despawnTimer),setTimeout(v,2e3)),requestAnimationFrame(S)}function Y(){v(),C(()=>S()),b()}const w=["../../assets/img/btn-retry.png","../../assets/img/btn-retry-active.png","../../assets/img/EndGame.png"];w.forEach(t=>{const c=new Image;c.src=t});Y();document.addEventListener("gesturestart",function(t){t.preventDefault()});document.addEventListener("gesturechange",function(t){t.preventDefault()});document.addEventListener("gestureend",function(t){t.preventDefault()});
